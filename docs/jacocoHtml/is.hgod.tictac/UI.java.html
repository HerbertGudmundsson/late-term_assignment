<?xml version="1.0" encoding="UTF-8"?><!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd"><html xmlns="http://www.w3.org/1999/xhtml" lang="en"><head><meta http-equiv="Content-Type" content="text/html;charset=UTF-8"/><link rel="stylesheet" href="../.resources/report.css" type="text/css"/><link rel="shortcut icon" href="../.resources/report.gif" type="image/gif"/><title>UI.java</title><link rel="stylesheet" href="../.resources/prettify.css" type="text/css"/><script type="text/javascript" src="../.resources/prettify.js"></script></head><body onload="window['PR_TAB_WIDTH']=4;prettyPrint()"><div class="breadcrumb" id="breadcrumb"><span class="info"><a href="../.sessions.html" class="el_session">Sessions</a></span><a href="../index.html" class="el_report">late-term_assignment</a> &gt; <a href="index.source.html" class="el_package">is.hgod.tictac</a> &gt; <span class="el_source">UI.java</span></div><h1>UI.java</h1><pre class="source lang-java linenums">package is.hgod.tictac;

import java.io.*;
import java.util.Scanner;


/**
 * @author Hermann Ingi Ragnarsson hermannr14@ru.is
 * @version 0.1
 * @since 2015-10-30
 */
public class UI {

    /**
     * Sole constructor.
     */
<span class="nc" id="L17">    UI() {</span>
<span class="nc" id="L18">        getAsciiArt();</span>
<span class="nc" id="L19">    }</span>

    /**
     * An instance of the Engine Class
     */
    private Engine game;
    /**
     * An array of all the lines of the assets text file.
     */
<span class="nc" id="L28">    private String[] allLines = new String[139];</span>

    /**
     * Prints 3 empty lines in between the different screens of the game.
     */
    private void printEmptyLines() {
<span class="nc bnc" id="L34" title="All 2 branches missed.">        for (int i = 0; i &lt; 3; i++) {</span>
<span class="nc" id="L35">            System.out.println();</span>
        }
<span class="nc" id="L37">    }</span>

    /**
     * Prints the name of the game in Ascii art.
     */
    private void printHeader() {
<span class="nc" id="L43">        int start = 55;</span>
<span class="nc" id="L44">        int end = 86;</span>
<span class="nc" id="L45">        printRow(start, end);</span>
<span class="nc" id="L46">    }</span>

    /**
     * Prints the game board with numbers indicating the squares of the board.
     */
    private void printInitialBoard() {
<span class="nc" id="L52">        int start = 0;</span>
<span class="nc bnc" id="L53" title="All 2 branches missed.">        for (int i = 0; i &lt; 3; i++) {</span>
<span class="nc" id="L54">            printRow(start);</span>
<span class="nc" id="L55">            start += 11;</span>
        }
<span class="nc" id="L57">        printEmptyLines();</span>
<span class="nc" id="L58">        printScoreBoard();</span>
<span class="nc" id="L59">    }</span>

    /**
    * Prints the games score with the number of games won for each player currently playing
    */
    private void printScoreBoard(){
<span class="nc" id="L65">        int gamemode = game.getGameMode();</span>
        String score1, score2;
<span class="nc" id="L67">        score1 = Integer.toString(game.getHumanWins(1));</span>
<span class="nc" id="L68">        int numStart = 119;</span>
<span class="nc bnc" id="L69" title="All 2 branches missed.">        if(gamemode == 1){</span>
<span class="nc" id="L70">            score2 = Integer.toString(game.getComputerWins());</span>
<span class="nc bnc" id="L71" title="All 2 branches missed.">            for(int i = 0; i &lt; 8; i++){</span>
<span class="nc" id="L72">                System.out.print(allLines[87 + i]);</span>
<span class="nc bnc" id="L73" title="All 2 branches missed.">                for(int j = 0; j &lt; score1.length(); j++){</span>
<span class="nc" id="L74">                    System.out.print(allLines[numStart + i].substring((score1.charAt(j) - 48) * 7, ((score1.charAt(j) - 48) * 7) + 7));</span>
                }
<span class="nc" id="L76">                System.out.println();</span>
            }
<span class="nc bnc" id="L78" title="All 2 branches missed.">            for(int i = 0; i &lt; 8; i++){</span>
<span class="nc" id="L79">                System.out.print(allLines[95 + i]);</span>
<span class="nc bnc" id="L80" title="All 2 branches missed.">                for(int j = 0; j &lt; score2.length(); j++){</span>
<span class="nc" id="L81">                    System.out.print(allLines[numStart + i].substring((score2.charAt(j) - 48) * 7, ((score2.charAt(j) - 48) * 7) + 7));</span>
                }
<span class="nc" id="L83">                System.out.println();  </span>
            }
        }
<span class="nc bnc" id="L86" title="All 2 branches missed.">        else if(gamemode == 2){</span>
<span class="nc" id="L87">            score2 = Integer.toString(game.getHumanWins(2));</span>
<span class="nc bnc" id="L88" title="All 2 branches missed.">            for(int i = 0; i &lt; 8; i++){</span>
<span class="nc" id="L89">                System.out.print(allLines[103 + i]);</span>
<span class="nc bnc" id="L90" title="All 2 branches missed.">                for(int j = 0; j &lt; score1.length(); j++){</span>
<span class="nc" id="L91">                    System.out.print(allLines[numStart + i].substring((score1.charAt(j) - 48) * 7, ((score1.charAt(j) - 48) * 7) + 7));</span>
                }
<span class="nc" id="L93">                System.out.println();</span>
            }
<span class="nc bnc" id="L95" title="All 2 branches missed.">            for(int i = 0; i &lt; 8; i++){</span>
<span class="nc" id="L96">                System.out.print(allLines[111 + i]);</span>
<span class="nc bnc" id="L97" title="All 2 branches missed.">                for(int j = 0; j &lt; score2.length(); j++){</span>
<span class="nc" id="L98">                    System.out.print(allLines[numStart + i].substring((score2.charAt(j) - 48) * 7, ((score2.charAt(j) - 48) * 7) + 7));</span>
                }
<span class="nc" id="L100">                System.out.println();  </span>
            }
        }
<span class="nc" id="L103">    }</span>

    /**
     * Prints the current game board.
     */
    private void printBoard() {
<span class="nc" id="L109">        String[] currentBoard = new String[3];</span>
<span class="nc bnc" id="L110" title="All 2 branches missed.">        for (int i = 0; i &lt; 3; i++) {</span>
<span class="nc" id="L111">            currentBoard[i] = &quot;&quot;;</span>
<span class="nc bnc" id="L112" title="All 2 branches missed.">            for (int j = 0; j &lt; game.getBoard()[i].length; j++) {</span>
<span class="nc bnc" id="L113" title="All 2 branches missed.">                if (game.getBoard()[i][j] == 0) {</span>
<span class="nc" id="L114">                    currentBoard[i] += &quot;0&quot;;</span>
                } else {
<span class="nc" id="L116">                    currentBoard[i] += game.getBoard()[i][j];</span>
                }
            }
<span class="nc" id="L119">            printRow(currentBoard[i]);</span>
        }
<span class="nc" id="L121">        printEmptyLines();</span>
<span class="nc" id="L122">    }</span>

    /**
     * Prints the menu for the game where the player can select either PvP or PvE.
     */
    private void printMenu() {
<span class="nc" id="L128">        int start = 33;</span>
<span class="nc" id="L129">        int end = 54;</span>
<span class="nc" id="L130">        printRow(start, end);</span>
<span class="nc" id="L131">    }</span>

    /**
     * Prints the Ascii art assets for the game.
     * The assets were generated using http://http://patorjk.com/software/taag/.
     * The method will print the start line and the next 11 lines.
     *
     * @param start The line number of the first line to be printed.
     */
    private void printRow(int start) {
<span class="nc" id="L141">        int end = start + 10;</span>
<span class="nc bnc" id="L142" title="All 2 branches missed.">        for (int j = start; j &lt;= end; j++) {</span>
<span class="nc" id="L143">            System.out.println(allLines[j]);</span>
        }
<span class="nc" id="L145">    }</span>

    /**
     * Prints the Ascii art assets for the game.
     * The assets were generated using http://http://patorjk.com/software/taag/.
     *
     * @param start The line number of the first line to be printed.
     * @param end   The line number of the last line to be printed.
     */
    private void printRow(int start, int end) {
<span class="nc bnc" id="L155" title="All 2 branches missed.">        for (int j = start; j &lt;= end; j++) {</span>
<span class="nc" id="L156">            System.out.println(allLines[j]);</span>
        }
<span class="nc" id="L158">    }</span>


    /**
    * Prints the Ascii art assets for the game.
    * The assets were generated using http://patorjk.com/software/taag/.
    * 
    * @param row The string value of the line to be printed.
    */
    private void printRow(String row){
<span class="nc" id="L168">        int start = 127;</span>
<span class="nc bnc" id="L169" title="All 2 branches missed.">        for (int i = 0; i &lt; 11; i++){</span>
<span class="nc bnc" id="L170" title="All 2 branches missed.">            for(int j = 0; j &lt; 3; j++){</span>
<span class="nc bnc" id="L171" title="All 2 branches missed.">                if(row.charAt(j) == '0'){</span>
<span class="nc" id="L172">                    System.out.print(allLines[start + i].substring(40, 60));</span>
                }
<span class="nc bnc" id="L174" title="All 2 branches missed.">                else if(row.charAt(j) == 'X'){</span>
<span class="nc" id="L175">                    System.out.print(allLines[start + i].substring(0, 20));</span>
                }
                else{
<span class="nc" id="L178">                    System.out.print(allLines[start + i].substring(20, 40));</span>
                }
            }
<span class="nc" id="L181">            System.out.println();</span>
        }
<span class="nc" id="L183">    }</span>

    /**
     * Retrieve the Ascii art assets from a file.
     * The assets were generated using http://http://patorjk.com/software/taag/.
     *
     * @throws FileNotFoundException Thrown if no assets text file is found.
     * @throws IOException           Thrown if file is corrupted.
     */
    private void getAsciiArt() {
<span class="nc" id="L193">        String fileName = &quot;/assets.txt&quot;;</span>
<span class="nc" id="L194">        String line = null;</span>
        try {
<span class="nc" id="L196">            InputStream in = getClass().getResourceAsStream(fileName);</span>
<span class="nc" id="L197">            BufferedReader bufferedReader = new BufferedReader(new InputStreamReader(in));</span>
<span class="nc" id="L198">            int i = 0;</span>
<span class="nc bnc" id="L199" title="All 2 branches missed.">            while ((line = bufferedReader.readLine()) != null) {</span>
<span class="nc" id="L200">                allLines[i] = line;</span>
<span class="nc" id="L201">                i++;</span>
            }
<span class="nc" id="L203">            bufferedReader.close();</span>
<span class="nc" id="L204">        } catch (FileNotFoundException ex) {</span>
<span class="nc" id="L205">            System.out.println(&quot;Unable to open file '&quot; + fileName + &quot;'&quot;);</span>
<span class="nc" id="L206">        } catch (IOException ex) {</span>
<span class="nc" id="L207">            System.out.println(&quot;Error reading file '&quot; + fileName + &quot;'&quot;);</span>
<span class="nc" id="L208">        }</span>
<span class="nc" id="L209">    }</span>

    /**
     * Starts the User Interface
     */
    public void startUI() {
<span class="nc" id="L215">        Scanner in = new Scanner(System.in);</span>

<span class="nc" id="L217">        printHeader();</span>
<span class="nc" id="L218">        System.out.println(&quot;Press enter to continue&quot;);</span>
<span class="nc" id="L219">        in.nextLine();</span>
<span class="nc" id="L220">        printMenu();</span>
        int gamemode;
        while(true){
<span class="nc" id="L223">            String input = in.next();</span>
<span class="nc bnc" id="L224" title="All 6 branches missed.">            if(input.length() &lt; 2 &amp;&amp; (input.charAt(0) == 49 || input.charAt(0) == 50)){</span>
<span class="nc" id="L225">                gamemode = Integer.parseInt(input);</span>
<span class="nc" id="L226">                break;</span>
            }
<span class="nc" id="L228">        }</span>
<span class="nc" id="L229">        game = new Engine(gamemode);</span>
<span class="nc" id="L230">        printInitialBoard();</span>

<span class="nc" id="L232">        boolean keepPlaying = true;</span>
<span class="nc bnc" id="L233" title="All 2 branches missed.">        while (keepPlaying) {</span>

<span class="nc bnc" id="L235" title="All 2 branches missed.">            while (game.getTurn() &lt; 10) {</span>
<span class="nc" id="L236">                int nextPlayer = game.nextPlayer();</span>
                //To check for computer plays
<span class="nc" id="L238">                String input = &quot;&quot;;</span>
<span class="nc bnc" id="L239" title="All 2 branches missed.">                if (nextPlayer != 3) {</span>
<span class="nc" id="L240">                    System.out.println(&quot;Player&quot; + nextPlayer + &quot;: Select a number from 1 to 9&quot;);</span>
<span class="nc" id="L241">                    input = in.next();</span>
                }
<span class="nc" id="L243">                int winningPlay = game.getPlay(input, nextPlayer);</span>
<span class="nc bnc" id="L244" title="All 2 branches missed.">                while (winningPlay &lt; -1) {</span>
<span class="nc bnc" id="L245" title="All 2 branches missed.">                    if (winningPlay == -2) {</span>
<span class="nc" id="L246">                        System.out.println(&quot;Invalid input: &quot; + input + &quot;! Select a number from 1 to 9&quot;);</span>
                    } else {
<span class="nc" id="L248">                        System.out.println(&quot;Square already taken: &quot; + input + &quot;! Select another number from 1 to 9&quot;);</span>
                    }
<span class="nc" id="L250">                    input = in.next();</span>
<span class="nc" id="L251">                    winningPlay = game.getPlay(input, nextPlayer);</span>
                }
<span class="nc bnc" id="L253" title="All 2 branches missed.">                if (winningPlay == 1) {</span>
<span class="nc" id="L254">                    printBoard();</span>
<span class="nc bnc" id="L255" title="All 2 branches missed.">                    if(nextPlayer == 3){</span>
<span class="nc" id="L256">                        System.out.println(&quot;Computer won! Play another game?(y/n)&quot;);</span>
                    }else {
<span class="nc" id="L258">                        System.out.println(&quot;Player&quot; + nextPlayer + &quot; is winner! Play another game?(y/n)&quot;);</span>
                    }
<span class="nc bnc" id="L260" title="All 2 branches missed.">                    if (in.next().charAt(0) == 'n') {</span>
<span class="nc" id="L261">                        keepPlaying = false;</span>
<span class="nc" id="L262">                        break;</span>
                    } else {
                        break;
                    }
<span class="nc bnc" id="L266" title="All 2 branches missed.">                }else if(winningPlay == 2){</span>
<span class="nc" id="L267">                    printBoard();</span>
<span class="nc" id="L268">                    System.out.println(&quot;Game tied! Play another game?(y/n)&quot;);</span>
<span class="nc bnc" id="L269" title="All 2 branches missed.">                    if (in.next().charAt(0) == 'n') {</span>
<span class="nc" id="L270">                        keepPlaying = false;</span>
<span class="nc" id="L271">                        break;</span>
                    } else {
                        break;
                    }
                }else{
<span class="nc" id="L276">                    printBoard();</span>
                }
<span class="nc" id="L278">            }</span>
<span class="nc bnc" id="L279" title="All 2 branches missed.">            if (keepPlaying) {</span>
<span class="nc" id="L280">                game.newGame();</span>
<span class="nc" id="L281">                printInitialBoard();</span>
            }
        }

<span class="nc" id="L285">    }</span>

    public static void main(String[] args){
<span class="nc" id="L288">	UI ui = new UI();</span>
<span class="nc" id="L289">	ui.startUI();</span>
<span class="nc" id="L290">    }</span>
}
</pre><div class="footer"><span class="right">Created with <a href="http://www.eclemma.org/jacoco">JaCoCo</a> 0.7.1.201405082137</span></div></body></html>